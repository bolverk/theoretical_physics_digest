Stellar atmosphere (or stellar envelope) is the tenuous outer layer of a star. The mass of this layer is negligible compared with that of the star, so one can assume that gravity $ g $ is constant throughout. The condition for mechanical equilibrium is

$ \frac{dP}{dr} = -g \rho $

Where $ P $ is the pressure and $ \rho $ is the density. If the atmosphere is adiabatic $ P = K \rho ^{\gamma} $ where $ K $ is a constant and $ \gamma $ is the adiabatic constant. Solving for the density

$ \frac{dP}{dr} = \gamma K \rho^{\gamma-1} \frac{dP}{dr} = -g \rho  $

$ \gamma K \rho^{\gamma-2} \frac{d\rho}{dr} = -g  $

$  \frac{d}{dr} \left(\rho^{\gamma-1}\right) = -\frac{\gamma-1}{\gamma} \frac{g}{K}  $

$ \rho^{\gamma-1} = \frac{\gamma-1}{\gamma} \frac{g}{K} \left(R - r\right) $

$ \rho = \left[ \frac{\gamma-1}{\gamma} \frac{g}{K} \left(R - r\right) \right]^{\frac{1}{\gamma-1}} $

Where $ R $ is the radius of the star (the point where the density vanishes). For a non radiative atmosphere $ \gamma = \frac{5}{3} $ and $ \rho \propto \left(R-r\right)^{3/2} $. For radiative atmospheres $ \gamma = \frac{4}{3} $ and $ \rho \propto \left(R-r\right)^3 $.